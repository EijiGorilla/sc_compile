{"version":3,"file":"static/js/6697.b6871fb3.chunk.js","mappings":"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","sources":["components/TreeChart.tsx"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\r\nimport { treeCompensationLayer, treeCuttingLayer } from '../layers';\r\nimport { view } from '../Scene';\r\nimport FeatureFilter from '@arcgis/core/layers/support/FeatureFilter';\r\nimport Query from '@arcgis/core/rest/support/Query';\r\nimport * as am5 from '@amcharts/amcharts5';\r\nimport * as am5percent from '@amcharts/amcharts5/percent';\r\nimport am5themes_Animated from '@amcharts/amcharts5/themes/Animated';\r\nimport am5themes_Responsive from '@amcharts/amcharts5/themes/Responsive';\r\nimport {\r\n  generateTreeCuttingData,\r\n  generateTreesNumber,\r\n  statusTreeCuttingChart,\r\n  statusTreeCompensationChart,\r\n  thousands_separators,\r\n  generateTreeCompensationData,\r\n} from '../Query';\r\nimport '../App.css';\r\nimport { primaryLabelColor, valueLabelColor } from '../StatusUniqueValues';\r\nimport '@esri/calcite-components/dist/components/calcite-label';\r\nimport { CalciteLabel } from '@esri/calcite-components-react';\r\nimport { useContractPackageContext } from './ContractPackageContext';\r\n\r\n// Dispose function\r\nfunction maybeDisposeRoot(divId: any) {\r\n  am5.array.each(am5.registry.rootElements, function (root) {\r\n    if (root.dom.id === divId) {\r\n      root.dispose();\r\n    }\r\n  });\r\n}\r\n\r\nconst TreeChart = () => {\r\n  const { cpValueSelected } = useContractPackageContext();\r\n\r\n  // Tree cutting\r\n  const pieSeriesRef = useRef<unknown | any | undefined>({});\r\n  const legendRef = useRef<unknown | any | undefined>({});\r\n  const chartRef = useRef<unknown | any | undefined>({});\r\n  const [treeCuttingData, setTreeCuttingData] = useState([\r\n    {\r\n      category: String,\r\n      value: Number,\r\n      sliceSettings: {\r\n        fill: am5.color('#00c5ff'),\r\n      },\r\n    },\r\n  ]);\r\n  const chartID_cuting = 'pie-cut';\r\n\r\n  // Tree compensation\r\n  const pieSeriesRef_compen = useRef<unknown | any | undefined>({});\r\n  const legendRef_compen = useRef<unknown | any | undefined>({});\r\n  const chartRef_compen = useRef<unknown | any | undefined>({});\r\n  const [treeCompensationData, setTreeCompensationData] = useState([\r\n    {\r\n      category: String,\r\n      value: Number,\r\n      sliceSettings: {\r\n        fill: am5.color('#00c5ff'),\r\n      },\r\n    },\r\n  ]);\r\n  const chartID_compen = 'pie-compen';\r\n\r\n  const [treesNumber, setTreesNumber] = useState([]);\r\n\r\n  const defaultExpression = '1=1';\r\n  const queryExpression = \"CP = '\" + cpValueSelected + \"'\";\r\n  if (cpValueSelected === 'All') {\r\n    treeCuttingLayer.definitionExpression = defaultExpression;\r\n    treeCompensationLayer.definitionExpression = defaultExpression;\r\n  } else {\r\n    treeCuttingLayer.definitionExpression = queryExpression;\r\n    treeCompensationLayer.definitionExpression = queryExpression;\r\n  }\r\n\r\n  // chart and box properties\r\n  const legendBoxWidth = 220;\r\n  const legendY = am5.percent(53);\r\n\r\n  useEffect(() => {\r\n    generateTreeCuttingData().then((result: any) => {\r\n      setTreeCuttingData(result);\r\n    });\r\n\r\n    generateTreeCompensationData().then((result: any) => {\r\n      setTreeCompensationData(result);\r\n    });\r\n\r\n    generateTreesNumber().then((response: any) => {\r\n      setTreesNumber(response);\r\n    });\r\n  }, [cpValueSelected]);\r\n\r\n  useEffect(() => {\r\n    maybeDisposeRoot(chartID_cuting);\r\n\r\n    var root = am5.Root.new(chartID_cuting);\r\n    root.container.children.clear();\r\n    root._logo?.dispose();\r\n\r\n    // Set themesf\r\n    root.setThemes([am5themes_Animated.new(root), am5themes_Responsive.new(root)]);\r\n\r\n    // Create chart\r\n    var chart = root.container.children.push(\r\n      am5percent.PieChart.new(root, {\r\n        layout: root.verticalLayout,\r\n      }),\r\n    );\r\n\r\n    // Add image in the middle\r\n    // chart.children.push(\r\n    //   am5.Picture.new(root, {\r\n    //     width: 50,\r\n    //     height: 50,\r\n    //     x: am5.percent(50),\r\n    //     y: am5.percent(50),\r\n    //     centerX: am5.percent(100),\r\n    //     centerY: am5.percent(55),\r\n    //     src: 'https://EijiGorilla.github.io/Symbols/Tree_Cutting_Logo.svg',\r\n    //   }),\r\n    // );\r\n\r\n    chartRef.current = chart;\r\n\r\n    // Create series\r\n    var pieSeries = chart.series.push(\r\n      am5percent.PieSeries.new(root, {\r\n        name: 'Series',\r\n        categoryField: 'category',\r\n        valueField: 'value',\r\n        //legendLabelText: \"[{fill}]{category}[/]\",\r\n        legendValueText: \"{valuePercentTotal.formatNumber('#.')}% ({value})\",\r\n        radius: am5.percent(45), // outer radius\r\n        innerRadius: am5.percent(28),\r\n        scale: 2.25,\r\n      }),\r\n    );\r\n    pieSeriesRef.current = pieSeries;\r\n    chart.series.push(pieSeries);\r\n\r\n    // values inside a donut\r\n    let inner_label = pieSeries.children.push(\r\n      am5.Label.new(root, {\r\n        text: '[#ffffff]{valueSum}[/]\\n[fontSize: 5px; #d3d3d3; verticalAlign: super]TREES[/]',\r\n        fontSize: '0.8rem',\r\n        centerX: am5.percent(50),\r\n        centerY: am5.percent(40),\r\n        populateText: true,\r\n        oversizedBehavior: 'fit',\r\n        textAlign: 'center',\r\n      }),\r\n    );\r\n\r\n    pieSeries.onPrivate('width', (width: any) => {\r\n      inner_label.set('maxWidth', width * 0.7);\r\n    });\r\n\r\n    // Set slice opacity and stroke color\r\n    pieSeries.slices.template.setAll({\r\n      toggleKey: 'none',\r\n      fillOpacity: 0.9,\r\n      stroke: am5.color('#ffffff'),\r\n      strokeWidth: 0.5,\r\n      strokeOpacity: 1,\r\n      templateField: 'sliceSettings',\r\n    });\r\n\r\n    // Disabling labels and ticksll\r\n    pieSeries.labels.template.setAll({\r\n      // fill: am5.color('#ffffff'),\r\n      // fontSize: '0.5rem',\r\n      visible: false,\r\n      scale: 0,\r\n      // oversizedBehavior: 'wrap',\r\n      // maxWidth: 65,\r\n      // text: \"{category}: [#C9CC3F; fontSize: 10px;]{valuePercentTotal.formatNumber('#.')}%[/]\",\r\n    });\r\n\r\n    // pieSeries.labels.template.set('visible', true);\r\n    pieSeries.ticks.template.setAll({\r\n      // fillOpacity: 0.9,\r\n      // stroke: am5.color('#ffffff'),\r\n      // strokeWidth: 0.3,\r\n      // strokeOpacity: 1,\r\n      visible: false,\r\n      scale: 0,\r\n    });\r\n\r\n    // EventDispatcher is disposed at SpriteEventDispatcher...\r\n    // It looks like this error results from clicking events\r\n    pieSeries.slices.template.events.on('click', (ev) => {\r\n      const selected: any = ev.target.dataItem?.dataContext;\r\n      const categorySelected: string = selected.category;\r\n      const find = statusTreeCuttingChart.find((emp: any) => emp.category === categorySelected);\r\n      const statusSelect = find?.value;\r\n\r\n      var highlightSelect: any;\r\n\r\n      var query = treeCuttingLayer.createQuery();\r\n\r\n      view.when(function () {\r\n        view.whenLayerView(treeCuttingLayer).then((layerView): any => {\r\n          //chartLayerView = layerView;\r\n\r\n          treeCuttingLayer.queryFeatures(query).then((results: any) => {\r\n            const RESULT_LENGTH = results.features;\r\n            const ROW_N = RESULT_LENGTH.length;\r\n\r\n            let objID = [];\r\n            for (var i = 0; i < ROW_N; i++) {\r\n              var obj = results.features[i].attributes.OBJECTID;\r\n              objID.push(obj);\r\n            }\r\n\r\n            var queryExt = new Query({\r\n              objectIds: objID,\r\n            });\r\n\r\n            treeCuttingLayer.queryExtent(queryExt).then((result: any) => {\r\n              if (result.extent) {\r\n                view.goTo(result.extent);\r\n              }\r\n            });\r\n\r\n            if (highlightSelect) {\r\n              highlightSelect.remove();\r\n            }\r\n            highlightSelect = layerView.highlight(objID);\r\n\r\n            view.on('click', function () {\r\n              layerView.filter = new FeatureFilter({\r\n                where: undefined,\r\n              });\r\n              highlightSelect.remove();\r\n            });\r\n          }); // End of queryFeatures\r\n\r\n          layerView.filter = new FeatureFilter({\r\n            where: 'Status = ' + statusSelect,\r\n          });\r\n\r\n          // For initial state, we need to add this\r\n          view.on('click', () => {\r\n            layerView.filter = new FeatureFilter({\r\n              where: undefined,\r\n            });\r\n            highlightSelect !== undefined ? highlightSelect.remove() : console.log('');\r\n          });\r\n        }); // End of view.whenLayerView\r\n      }); // End of view.whenv\r\n    });\r\n\r\n    pieSeries.data.setAll(treeCuttingData);\r\n\r\n    // Legend\r\n    // https://www.amcharts.com/docs/v5/charts/percent-charts/legend-percent-series/\r\n    var legend = chart.children.push(\r\n      am5.Legend.new(root, {\r\n        centerX: am5.percent(50),\r\n        x: am5.percent(50),\r\n      }),\r\n    );\r\n    legendRef.current = legend;\r\n    legend.data.setAll(pieSeries.dataItems);\r\n\r\n    // Change the size of legend markers\r\n    legend.markers.template.setAll({\r\n      width: 18,\r\n      height: 18,\r\n    });\r\n\r\n    // Change the marker shape\r\n    legend.markerRectangles.template.setAll({\r\n      cornerRadiusTL: 10,\r\n      cornerRadiusTR: 10,\r\n      cornerRadiusBL: 10,\r\n      cornerRadiusBR: 10,\r\n    });\r\n\r\n    // Responsive legend\r\n    chart.onPrivate('width', function (width: any) {\r\n      const boxWidth = legendBoxWidth; //props.style.width;\r\n      var availableSpace = Math.max(width - chart.height() - boxWidth, boxWidth);\r\n      //var availableSpace = (boxWidth - valueLabelsWidth) * 0.7\r\n      legend.labels.template.setAll({\r\n        width: availableSpace,\r\n        maxWidth: availableSpace,\r\n      });\r\n    });\r\n\r\n    // To align legend items: valueLabels right, labels to left\r\n    // 1. fix width of valueLabels\r\n    // 2. dynamically change width of labels by screen size\r\n\r\n    // Change legend labelling properties\r\n    // To have responsive font size, do not set font size\r\n    legend.labels.template.setAll({\r\n      oversizedBehavior: 'truncate',\r\n      fill: am5.color('#ffffff'),\r\n      //textDecoration: \"underline\"\r\n      //width: am5.percent(200)\r\n      //fontWeight: \"300\"\r\n    });\r\n\r\n    legend.valueLabels.template.setAll({\r\n      textAlign: 'right',\r\n      //width: valueLabelsWidth,\r\n      fill: am5.color('#ffffff'),\r\n      //fontSize: LEGEND_FONT_SIZE,\r\n    });\r\n\r\n    legend.itemContainers.template.setAll({\r\n      // set space between legend items\r\n      paddingTop: 1.1,\r\n      paddingBottom: 2,\r\n    });\r\n\r\n    pieSeries.appear(1000, 100);\r\n\r\n    return () => {\r\n      root.dispose();\r\n    };\r\n  }, [chartID_cuting, treeCuttingData]);\r\n\r\n  useEffect(() => {\r\n    pieSeriesRef.current?.data.setAll(treeCuttingData);\r\n    legendRef.current?.data.setAll(pieSeriesRef.current.dataItems);\r\n  });\r\n\r\n  useEffect(() => {\r\n    maybeDisposeRoot(chartID_compen);\r\n\r\n    var root = am5.Root.new(chartID_compen);\r\n    root.container.children.clear();\r\n    root._logo?.dispose();\r\n\r\n    // Set themesf\r\n    root.setThemes([am5themes_Animated.new(root), am5themes_Responsive.new(root)]);\r\n\r\n    // Create chart\r\n    var chart = root.container.children.push(\r\n      am5percent.PieChart.new(root, {\r\n        layout: root.verticalLayout,\r\n      }),\r\n    );\r\n    chartRef_compen.current = chart;\r\n\r\n    // Create series\r\n    var pieSeries = chart.series.push(\r\n      am5percent.PieSeries.new(root, {\r\n        name: 'Series',\r\n        categoryField: 'category',\r\n        valueField: 'value',\r\n        //legendLabelText: \"[{fill}]{category}[/]\",\r\n        legendValueText: \"{valuePercentTotal.formatNumber('#.')}% ({value})\",\r\n        radius: am5.percent(45), // outer radius\r\n        innerRadius: am5.percent(28),\r\n        scale: 2.25,\r\n      }),\r\n    );\r\n    pieSeriesRef_compen.current = pieSeries;\r\n    chart.series.push(pieSeries);\r\n\r\n    // values inside a donut\r\n    let inner_label = pieSeries.children.push(\r\n      am5.Label.new(root, {\r\n        text: '[#ffffff]{valueSum}[/]\\n[fontSize: 5px; #d3d3d3; verticalAlign: super]TREES[/]',\r\n        fontSize: '0.8rem',\r\n        centerX: am5.percent(50),\r\n        centerY: am5.percent(40),\r\n        populateText: true,\r\n        oversizedBehavior: 'fit',\r\n        textAlign: 'center',\r\n      }),\r\n    );\r\n\r\n    pieSeries.onPrivate('width', (width: any) => {\r\n      inner_label.set('maxWidth', width * 0.7);\r\n    });\r\n\r\n    // Set slice opacity and stroke color\r\n    pieSeries.slices.template.setAll({\r\n      toggleKey: 'none',\r\n      fillOpacity: 0.9,\r\n      stroke: am5.color('#ffffff'),\r\n      strokeWidth: 0.5,\r\n      strokeOpacity: 1,\r\n      templateField: 'sliceSettings',\r\n    });\r\n\r\n    // Disabling labels and ticksll\r\n    pieSeries.labels.template.setAll({\r\n      // fill: am5.color('#ffffff'),\r\n      // fontSize: '0.5rem',\r\n      visible: false,\r\n      scale: 0,\r\n      // oversizedBehavior: 'wrap',\r\n      // maxWidth: 65,\r\n      // text: \"{category}: [#C9CC3F; fontSize: 10px;]{valuePercentTotal.formatNumber('#.')}%[/]\",\r\n    });\r\n\r\n    // pieSeries.labels.template.set('visible', true);\r\n    pieSeries.ticks.template.setAll({\r\n      // fillOpacity: 0.9,\r\n      // stroke: am5.color('#ffffff'),\r\n      // strokeWidth: 0.3,\r\n      // strokeOpacity: 1,\r\n      visible: false,\r\n      scale: 0,\r\n    });\r\n\r\n    // EventDispatcher is disposed at SpriteEventDispatcher...\r\n    // It looks like this error results from clicking events\r\n    pieSeries.slices.template.events.on('click', (ev) => {\r\n      const selected: any = ev.target.dataItem?.dataContext;\r\n      const categorySelected: string = selected.category;\r\n      const find = statusTreeCompensationChart.find(\r\n        (emp: any) => emp.category === categorySelected,\r\n      );\r\n      const statusSelect = find?.value;\r\n\r\n      var highlightSelect: any;\r\n\r\n      var query = treeCompensationLayer.createQuery();\r\n\r\n      view.when(function () {\r\n        view.whenLayerView(treeCompensationLayer).then((layerView): any => {\r\n          //chartLayerView = layerView;\r\n\r\n          treeCompensationLayer.queryFeatures(query).then((results: any) => {\r\n            const RESULT_LENGTH = results.features;\r\n            const ROW_N = RESULT_LENGTH.length;\r\n\r\n            let objID = [];\r\n            for (var i = 0; i < ROW_N; i++) {\r\n              var obj = results.features[i].attributes.OBJECTID;\r\n              objID.push(obj);\r\n            }\r\n\r\n            var queryExt = new Query({\r\n              objectIds: objID,\r\n            });\r\n\r\n            treeCompensationLayer.queryExtent(queryExt).then((result: any) => {\r\n              if (result.extent) {\r\n                view.goTo(result.extent);\r\n              }\r\n            });\r\n\r\n            if (highlightSelect) {\r\n              highlightSelect.remove();\r\n            }\r\n            highlightSelect = layerView.highlight(objID);\r\n\r\n            view.on('click', function () {\r\n              layerView.filter = new FeatureFilter({\r\n                where: undefined,\r\n              });\r\n              highlightSelect.remove();\r\n            });\r\n          }); // End of queryFeatures\r\n\r\n          layerView.filter = new FeatureFilter({\r\n            where: 'Compensation = ' + statusSelect,\r\n          });\r\n\r\n          // For initial state, we need to add this\r\n          view.on('click', () => {\r\n            layerView.filter = new FeatureFilter({\r\n              where: undefined,\r\n            });\r\n            highlightSelect !== undefined ? highlightSelect.remove() : console.log('');\r\n          });\r\n        }); // End of view.whenLayerView\r\n      }); // End of view.whenv\r\n    });\r\n\r\n    pieSeries.data.setAll(treeCompensationData);\r\n\r\n    // Legend\r\n    // https://www.amcharts.com/docs/v5/charts/percent-charts/legend-percent-series/\r\n    var legend = chart.children.push(\r\n      am5.Legend.new(root, {\r\n        centerX: am5.percent(50),\r\n        x: am5.percent(50),\r\n      }),\r\n    );\r\n    legendRef_compen.current = legend;\r\n    legend.data.setAll(pieSeries.dataItems);\r\n\r\n    // Change the size of legend markers\r\n    legend.markers.template.setAll({\r\n      width: 18,\r\n      height: 18,\r\n    });\r\n\r\n    // Change the marker shape\r\n    legend.markerRectangles.template.setAll({\r\n      cornerRadiusTL: 10,\r\n      cornerRadiusTR: 10,\r\n      cornerRadiusBL: 10,\r\n      cornerRadiusBR: 10,\r\n    });\r\n\r\n    // Responsive legend\r\n    // https://www.amcharts.com/docs/v5/tutorials/pie-chart-with-a-legend-with-dynamically-sized-labels/\r\n    // This aligns Legend to Left\r\n    chart.onPrivate('width', function (width: any) {\r\n      const boxWidth = legendBoxWidth; //props.style.width;\r\n      var availableSpace = Math.max(width - chart.height() - boxWidth, boxWidth);\r\n      //var availableSpace = (boxWidth - valueLabelsWidth) * 0.7\r\n      legend.labels.template.setAll({\r\n        width: availableSpace,\r\n        maxWidth: availableSpace,\r\n      });\r\n    });\r\n\r\n    // To align legend items: valueLabels right, labels to left\r\n    // 1. fix width of valueLabels\r\n    // 2. dynamically change width of labels by screen size\r\n\r\n    // Change legend labelling properties\r\n    // To have responsive font size, do not set font size\r\n    legend.labels.template.setAll({\r\n      oversizedBehavior: 'truncate',\r\n      fill: am5.color('#ffffff'),\r\n      //textDecoration: \"underline\"\r\n      //width: am5.percent(200)\r\n      //fontWeight: \"300\"\r\n    });\r\n\r\n    legend.valueLabels.template.setAll({\r\n      textAlign: 'right',\r\n      //width: valueLabelsWidth,\r\n      fill: am5.color('#ffffff'),\r\n      //fontSize: LEGEND_FONT_SIZE,\r\n    });\r\n\r\n    legend.itemContainers.template.setAll({\r\n      // set space between legend items\r\n      paddingTop: 1.1,\r\n      paddingBottom: 2,\r\n    });\r\n\r\n    pieSeries.appear(1000, 100);\r\n\r\n    return () => {\r\n      root.dispose();\r\n    };\r\n  }, [chartID_compen, treeCompensationData]);\r\n\r\n  useEffect(() => {\r\n    pieSeriesRef_compen.current?.data.setAll(treeCompensationData);\r\n    legendRef_compen.current?.data.setAll(pieSeriesRef_compen.current.dataItems);\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        style={{\r\n          color: primaryLabelColor,\r\n          fontSize: '1.2rem',\r\n          marginLeft: '13px',\r\n          marginTop: '10px',\r\n        }}\r\n      >\r\n        TOTAL TREES\r\n      </div>\r\n      <CalciteLabel layout=\"inline\">\r\n        <b className=\"totalLotsNumber\" style={{ color: valueLabelColor }}>\r\n          <div\r\n            style={{\r\n              color: valueLabelColor,\r\n              fontSize: '2rem',\r\n              fontWeight: 'bold',\r\n              fontFamily: 'calibri',\r\n              lineHeight: '1.2',\r\n              marginLeft: '15px',\r\n            }}\r\n          >\r\n            {thousands_separators(treesNumber[0])}\r\n          </div>\r\n          <img\r\n            src=\"https://EijiGorilla.github.io/Symbols/Tree_Logo.svg\"\r\n            alt=\"Land Logo\"\r\n            height={'55px'}\r\n            width={'55px'}\r\n            style={{ marginLeft: '260px', display: 'flex', marginTop: '-50px' }}\r\n          />\r\n        </b>\r\n      </CalciteLabel>\r\n\r\n      <div\r\n        id={chartID_cuting}\r\n        style={{\r\n          height: '36vh',\r\n          backgroundColor: 'rgb(0,0,0,0)',\r\n          color: 'white',\r\n        }}\r\n      ></div>\r\n      <div\r\n        id={chartID_compen}\r\n        style={{\r\n          height: '36vh',\r\n          backgroundColor: 'rgb(0,0,0,0)',\r\n          color: 'white',\r\n        }}\r\n      ></div>\r\n    </>\r\n  );\r\n}; // End of lotChartgs\r\n\r\nexport default TreeChart;\r\n"],"names":["maybeDisposeRoot","divId","am5","rootElements","root","dom","id","dispose","TreeChart","cpValueSelected","useContractPackageContext","pieSeriesRef","useRef","legendRef","chartRef","treeCuttingData","setTreeCuttingData","useState","category","String","value","Number","sliceSettings","fill","chartID_cuting","pieSeriesRef_compen","legendRef_compen","chartRef_compen","treeCompensationData","setTreeCompensationData","chartID_compen","treesNumber","setTreesNumber","queryExpression","treeCuttingLayer","definitionExpression","treeCompensationLayer","useEffect","generateTreeCuttingData","then","result","generateTreeCompensationData","generateTreesNumber","response","_root$_logo","new","container","children","clear","_logo","setThemes","am5themes_Animated","am5themes_Responsive","chart","push","am5percent","layout","verticalLayout","current","pieSeries","series","name","categoryField","valueField","legendValueText","radius","innerRadius","scale","inner_label","text","fontSize","centerX","centerY","populateText","oversizedBehavior","textAlign","onPrivate","width","set","slices","template","setAll","toggleKey","fillOpacity","stroke","strokeWidth","strokeOpacity","templateField","labels","visible","ticks","events","on","ev","_ev$target$dataItem","categorySelected","target","dataItem","dataContext","find","statusTreeCuttingChart","emp","statusSelect","highlightSelect","query","createQuery","view","when","whenLayerView","layerView","queryFeatures","results","ROW_N","features","length","objID","i","obj","attributes","OBJECTID","queryExt","Query","objectIds","queryExtent","extent","goTo","remove","highlight","filter","FeatureFilter","where","undefined","console","log","data","legend","x","dataItems","markers","height","markerRectangles","cornerRadiusTL","cornerRadiusTR","cornerRadiusBL","cornerRadiusBR","availableSpace","Math","max","maxWidth","valueLabels","itemContainers","paddingTop","paddingBottom","appear","_pieSeriesRef$current","_legendRef$current","_root$_logo2","_ev$target$dataItem2","statusTreeCompensationChart","_pieSeriesRef_compen$","_legendRef_compen$cur","_jsxs","_Fragment","_jsx","style","color","primaryLabelColor","marginLeft","marginTop","CalciteLabel","className","valueLabelColor","fontWeight","fontFamily","lineHeight","thousands_separators","src","alt","display","backgroundColor"],"sourceRoot":""}